<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Anonymous Types in C# &#8211; ðŸ’ª Dev Power</title>
<meta name="description" content="A detailed look into C#'s anonymous types">
<meta name="keywords" content="anonymous_type">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@_dev_power_">
<meta name="twitter:creator" content="@_dev_power_">

<!-- Open Graph -->
<meta property="og:locale" content="en_GB">
<meta property="og:type" content="article">
<meta property="og:title" content="Anonymous Types in C#">
<meta property="og:description" content="A detailed look into C#'s anonymous types">
<meta property="og:url" content="https://devpower.co.uk/csharp/programming/anonymous-types-in-csharp/">
<meta property="og:site_name" content="ðŸ’ª Dev Power">
<meta property="og:image" content="https://devpower.co.uk/images/">





<link rel="canonical" href="https://devpower.co.uk/csharp/programming/anonymous-types-in-csharp/">
<link href="https://devpower.co.uk/feed.xml" type="application/atom+xml" rel="alternate" title="ðŸ’ª Dev Power Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>

<!-- For all browsers -->
<link rel="stylesheet" href="https://devpower.co.uk/assets/css/main.css">
<link rel="stylesheet" href="https://devpower.co.uk/assets/css/jquery.mmenu.all.css">
<link rel="stylesheet" href="https://devpower.co.uk/assets/css/jquery.floating-social-share.min.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script type="text/javascript" src="https://devpower.co.uk/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="https://devpower.co.uk/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="https://devpower.co.uk/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://devpower.co.uk/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://devpower.co.uk/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://devpower.co.uk/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://devpower.co.uk/images/apple-touch-icon-144x144-precomposed.png">




<!-- 



 -->
</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->




<div class="header-menu header-menu-top">
  <ul class="header-item-container">
      <li class="header-item-title header-toggle "><a href="#menu"><h2><i class="fa fa-bars"></i></h2></a></li>
      <li class="header-item-title">
        <a href="https://devpower.co.uk/">
          
          </a><a href="https://devpower.co.uk/" class="title"> ðŸ’ª Dev Power</a>
        
      </li>
      
        
        

        
          <li class="header-item ">
<a href="https://devpower.co.uk/categories"><h3>Categories</h3></a>
            <ul class="header-submenu">
              
                
                  <li class="sub-item"><a href="https://devpower.co.uk/categories/#aws">aws</a></li>
              
                
                  <li class="sub-item"><a href="https://devpower.co.uk/categories/#cryptocurrency">cryptocurrency</a></li>
              
                
                  <li class="sub-item"><a href="https://devpower.co.uk/categories/#csharp">csharp</a></li>
              
                
                  <li class="sub-item"><a href="https://devpower.co.uk/categories/#devops">devops</a></li>
              
                
                  <li class="sub-item"><a href="https://devpower.co.uk/categories/#docker">docker</a></li>
              
                
                  <li class="sub-item"><a href="https://devpower.co.uk/categories/#dotnet">dotnet</a></li>
              
                
                  <li class="sub-item"><a href="https://devpower.co.uk/categories/#javascript">javascript</a></li>
              
                
                  <li class="sub-item"><a href="https://devpower.co.uk/categories/#meta">meta</a></li>
              
                
                  <li class="sub-item"><a href="https://devpower.co.uk/categories/#powershell">powershell</a></li>
              
                
                  <li class="sub-item"><a href="https://devpower.co.uk/categories/#programming">programming</a></li>
              
                
                  <li class="sub-item"><a href="https://devpower.co.uk/categories/#tips_n_tricks">tips_n_tricks</a></li>
              
                
                  <li class="sub-item"><a href="https://devpower.co.uk/categories/#tools">tools</a></li>
              
            </ul>
          </li>
        
      
        
        

        
            
                <li class="header-item "><a href="https://devpower.co.uk/tags"><h3>Tags</h3></a></li>
            
        
      
        
        

        
            
                <li class="header-item "><a href="https://devpower.co.uk/"><h3>Home</h3></a></li>
            
        
      
      <!-- <li class="header-item"><a href="https://devpower.co.uk/search"><h3><i class="fa fa-search"></i></h3></a></li> -->
    </ul>
  </div>
<div class="entry-header">
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Anonymous Types in C#</h1>
      <h3></h3>
      
        <h2><span class="entry-date date published updated"><time datetime="2022-04-25T00:00:00+01:00">April 25, 2022</time></span></h2>
      

      
        <p class="entry-reading-time">
          <i class="fa fa-clock-o"></i>
          
          Reading time ~2 minutes
        </p>
<!-- /.entry-reading-time -->
      
    </div>
<!-- /.header-title-wrap -->
  </div>
<!-- /.header-title -->
</div><!-- /.entry-header -->


<nav id="menu" style="display: none">
  <ul>
    
      
        <li><a href="https://devpower.co.uk/"><h3>Home</h3></a></li>
      
    
      
        <li><a href="https://devpower.co.uk/tags"><h3>Tags</h3></a></li>
      
    
      
        <li>
<a href="https://devpower.co.uk/categories"><h3>Categories</h3></a>
          <ul>
            
              
                <li><a href="https://devpower.co.uk/categories/#aws">aws</a></li>
            
              
                <li><a href="https://devpower.co.uk/categories/#cryptocurrency">cryptocurrency</a></li>
            
              
                <li><a href="https://devpower.co.uk/categories/#csharp">csharp</a></li>
            
              
                <li><a href="https://devpower.co.uk/categories/#devops">devops</a></li>
            
              
                <li><a href="https://devpower.co.uk/categories/#docker">docker</a></li>
            
              
                <li><a href="https://devpower.co.uk/categories/#dotnet">dotnet</a></li>
            
              
                <li><a href="https://devpower.co.uk/categories/#javascript">javascript</a></li>
            
              
                <li><a href="https://devpower.co.uk/categories/#meta">meta</a></li>
            
              
                <li><a href="https://devpower.co.uk/categories/#powershell">powershell</a></li>
            
              
                <li><a href="https://devpower.co.uk/categories/#programming">programming</a></li>
            
              
                <li><a href="https://devpower.co.uk/categories/#tips_n_tricks">tips_n_tricks</a></li>
            
              
                <li><a href="https://devpower.co.uk/categories/#tools">tools</a></li>
            
          </ul>
        </li>
      
    
  </ul>
</nav>


  <a href="https://twitter.com/_dev_power_" class="btn btn-info button-twitter" data-show-count="false" data-size="large" target="_blank" rel="noopener noreferrer"><i class="fa fa-twitter"></i> <span> | Follow @_dev_power_</span></a>



<div class="ukraine">
  <span>ðŸ‡ºðŸ‡¦</span>
  <a href="https://twitter.com/search?q=%23WeStandWithUkraine" target="_blank" rel="noopener noreferrer">We Stand with Ukraine</a>
  <span>ðŸ‡ºðŸ‡¦</span>
</div>

<div id="main" role="main">
  <article class="hentry">
    <div class="entry-content">
        
      <h1 class="post-title entry-title">Anonymous Types in C#</h1>
      <p>In the previous <a href="/csharp/programming/using-var-keyword-in-csharp/">post</a> we talked about the usage of var keyword. One of the main use cases for keyword is <strong>anonymous types</strong>. In thos post, we are going to look closer into anonymous types.</p>

<h2 id="anonymous-types">Anonymous types</h2>
<p>An anonymous type is a nameless class that inherits from object.</p>

<p>The type is inferred, by the compiler, at initialization.</p>

<p>For example, a typical anonymous declaration would look like this:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">person</span> <span class="p">=</span> <span class="k">new</span> 
<span class="p">{</span>
  <span class="n">FirstName</span> <span class="p">=</span> <span class="s">"John"</span><span class="p">,</span>
  <span class="n">LastName</span> <span class="p">=</span> <span class="s">"Power"</span><span class="p">,</span>
  <span class="n">Age</span> <span class="p">=</span> <span class="m">33</span>
<span class="p">};</span>
</code></pre></div></div>

<p>We can see, just like any other object, it supports IntelliSense. We can see all the properties we defined and the methods coming from <em>object</em> such as ToString() and Equals(). So it is a strongly-typed class. We just donâ€™t know the type.</p>

<p><img src="/images/post-images/2022/04/csharp-anonymous-types/simple-anonymous-type-with-intellisense.png" alt=""></p>

<p>The properties are read-only. If we try to assign another value we get the following error:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Compilation error (line 11, col 3): Property or indexer 'AnonymousType#1.Age' cannot be assigned to -- it is read only
</code></pre></div></div>

<p><img src="/images/post-images/2022/04/csharp-anonymous-types/read-only-assignment-error.png" alt=""></p>

<p>Since we donâ€™t have a handle of the class, then how can we create another object of this type? The answer is simple: We just create another anonymous type with the same properties.</p>

<p>For example, the following example would compile successfully:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Program</span>
<span class="p">{</span>
	<span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="kt">var</span> <span class="n">firstPerson</span> <span class="p">=</span> <span class="k">new</span> 
		<span class="p">{</span>
		  <span class="n">FirstName</span> <span class="p">=</span> <span class="s">"John"</span><span class="p">,</span>
		  <span class="n">LastName</span> <span class="p">=</span> <span class="s">"Power"</span><span class="p">,</span>
		  <span class="n">Age</span> <span class="p">=</span> <span class="m">33</span>
		<span class="p">};</span>
		
		<span class="kt">var</span> <span class="n">secondPerson</span> <span class="p">=</span> <span class="k">new</span> 
		<span class="p">{</span>
		  <span class="n">FirstName</span> <span class="p">=</span> <span class="s">"Jane"</span><span class="p">,</span>
		  <span class="n">LastName</span> <span class="p">=</span> <span class="s">"Power"</span><span class="p">,</span>
		  <span class="n">Age</span> <span class="p">=</span> <span class="m">44</span>
		<span class="p">};</span>
		
		<span class="n">firstPerson</span> <span class="p">=</span> <span class="n">secondPerson</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>secondPerson can be assigned to firstPerson as they have the same type. This is only possible if all the properties match. If we remove the Age property from the secondPerson, we get the error shown below:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Compilation error (line 18, col 17): Cannot implicitly convert type 'AnonymousType#1' to 'AnonymousType#2'
</code></pre></div></div>

<h3 id="shorthand-declarations">Shorthand Declarations</h3>
<p>The names of the properties can also be inferred if they are being assigned from another object. For example, if we wanted to create a second object of the same type, with the same values we could use this syntax:</p>

<p><img src="/images/post-images/2022/04/csharp-anonymous-types/shorthand-declaration.png" alt=""></p>

<p>As you can see in the screenshot above, we can still see the same property names as the firstPerson object.</p>

<p class="panel-note top-padding">The same feature exists in ES6. For more info, check out <a href="https://alligator.io/js/object-property-shorthand-es6/" target="_blank" rel="noopener noreferrer">this blog post</a> </p>

<h3 id="internals-of-anonymous-types">Internals of Anonymous Types</h3>
<p>So what happens when we compile our application with anonymous types? The type names are generated automatically by the compiler.</p>

<p>The example below shows how our class looks like with IL viewer:</p>

<p><img src="/images/post-images/2022/04/csharp-anonymous-types/anonymous-type-in-IL-viewer.png" alt=""></p>

<p>The firstPerson and secondPerson objects defined (of same type) are declared as:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>instance void class '&lt;&gt;f__AnonymousType0`3'&lt;string, string, int32&gt;::.ctor(!0/*string*/, !1/*string*/, !2/*int32*/)
</code></pre></div></div>

<p>The reason these auto-generated type names are hidden from the developer is that we donâ€™t actually need to know what they are. So itâ€™s generally a bad practice trying to find out these types via reflection.</p>

<p>The final example shows the IL output when Age property is removed from the secondPerson object. Now that the properties donâ€™t match with firstPerson, the compiler generates a new type for secondPerson named <em>&lt;&gt;f__AnonymousType1`2</em>:</p>

<p><img src="/images/post-images/2022/04/csharp-anonymous-types/multiple-anonymous-types-in-IL-viewer.png" alt=""></p>

<h2 id="resources">Resources</h2>
<ul>
  <li><a href="https://docs.microsoft.com/en-us/dotnet/csharp/fundamentals/types/anonymous-types" target="_blank" rel="noopener noreferrer">Anonymous Types</a></li>
</ul>

      <footer class="entry-meta">
        <span class="entry-tags"><a href="https://devpower.co.uk/tags#anonymous_type" title="Pages tagged anonymous_type" class="tag"><span class="term">anonymous_type</span></a></span>
        
        <span class="author vcard"><span class="fn">Volkan Paksoy</span></span>
        <div class="social-share">
  <ul class="socialcount socialcount-small inline-list">
    <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=https://devpower.co.uk/csharp/programming/anonymous-types-in-csharp/" title="Share on Facebook" target="_blank" rel="noopener noreferrer"><span class="count"><i class="fa fa-facebook-square"></i> Like</span></a></li>
    <li class="twitter"><a href="https://twitter.com/intent/tweet?text=https://devpower.co.uk/csharp/programming/anonymous-types-in-csharp/" title="Share on Twitter" target="_blank" rel="noopener noreferrer"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a></li>
    <!-- <li class="googleplus"><a href="https://plus.google.com/share?url=https://devpower.co.uk/csharp/programming/anonymous-types-in-csharp/" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a></li> -->
  </ul>
</div>
<!-- /.social-share -->

      </footer>
    </div>
<!-- /.entry-content -->
    <div class="read-more">
  <div class="read-more-header">
    <a href="https://devpower.co.uk" class="read-more-btn">About the Author</a>
  </div>
<!-- /.read-more-header -->
  <div class="read-more-content author-info">
    <h3>Volkan Paksoy</h3>
    <div class="author-container">
      <img class="author-img" src="https://devpower.co.uk/images/shared/vp-avatar.png" alt="Volkan Paksoy">
      <div class="author-bio"></div>
    </div>
    <div class="author-share">
      <ul class="list-inline social-buttons">
        
          <li><a href="https://github.com/Dev-Power" target="_blank" rel="noopener noreferrer"><i class="fa fa-github fa-fw"></i></a></li>
        
          <li><a href="https://www.youtube.com/channel/UC9YE-1HhpfC-1DqhHxqUUfw" target="_blank" rel="noopener noreferrer"><i class="fa fa-youtube fa-fw"></i></a></li>
        
          <li><a href="https://twitter.com/_dev_power_" target="_blank" rel="noopener noreferrer"><i class="fa fa-twitter fa-fw"></i></a></li>
        
      </ul>
      
        <a aria-label="Follow @Dev-Power on GitHub" data-style="mega" href="https://github.com/Dev-Power" class="github-button" target="_blank" rel="noopener noreferrer">Follow @Dev-Power</a>
      
      <br>
      
        <a href="https://twitter.com/_dev_power_" class="twitter-follow-button" data-show-count="false" data-size="large" target="_blank" rel="noopener noreferrer">Follow @_dev_power_</a>
      
    </div>
  </div>
</div>

    <section id="disqus_thread"></section><!-- /#disqus_thread -->
    <div class="read-more">
  
    <div class="read-more-header">
      <a href="https://devpower.co.uk/csharp/programming/using-var-keyword-in-csharp/" class="read-more-btn">Read More</a>
    </div>
<!-- /.read-more-header -->
    <div class="read-more-content">
      <h3><a href="https://devpower.co.uk/cryptocurrency/solana-epoch-monitor/" title="Solana Epoch Monitor">Solana Epoch Monitor</a></h3>
      <p>A Dockerized C# .NET application to monitor Solana API and send notifications when a new epoch starts <a href="https://devpower.co.uk/cryptocurrency/solana-epoch-monitor/">Continue reading</a></p>
    </div>
<!-- /.read-more-content -->
  
  <div class="read-more-list">
    
      <div class="list-item">
        <h4><a href="https://devpower.co.uk/dotnet/csharp/develop-a-cli-with-csharp/" title="Develop your own CLI with C#">Develop your own CLI with C#</a></h4>
        <span>Published on May 24, 2022</span>
      </div>
<!-- /.list-item -->
    
      <div class="list-item">
        <h4><a href="https://devpower.co.uk/devops/exploring-github-actions/" title="Exploring GitHub Actions">Exploring GitHub Actions</a></h4>
        <span>Published on May 23, 2022</span>
      </div>
<!-- /.list-item -->
    
  </div>
<!-- /.read-more-list -->
</div>
<!-- /.read-more -->
  </article>
</div><!-- /#main -->

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">window.jQuery || document.write('<script type="text/javascript" src="https://devpower.co.uk/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script type="text/javascript" src="https://devpower.co.uk/assets/js/scripts.min.js"></script>
<script type="text/javascript" async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>
<script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>



<!-- Asynchronous Google Analytics snippet -->
<!--script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'G-V0VB7KHEQV', 'auto');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script-->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-V0VB7KHEQV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-V0VB7KHEQV');
</script>




    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'devpower'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript" target="_blank" rel="noopener noreferrer">comments powered by Disqus.</a>
</noscript>
    <a href="http://disqus.com" class="dsq-brlink" target="_blank" rel="noopener noreferrer">comments powered by <span class="logo-disqus">Disqus</span></a>






<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>Â© 2022 DevPower.co.uk </span>

  </footer>
</div><!-- /.footer-wrapper -->

</body>
</html>

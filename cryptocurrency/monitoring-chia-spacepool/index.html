<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Developing a custom monitoring tool in C# for SpacePool Chia cryptocurrency farming &#8211; DevPower</title>
<meta name="description" content="This post discusses how to get an API key and develop a C# application to verify your farm is healthy.">
<meta name="keywords" content="chia, spacepool, monitoring">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@_dev_power_">
<meta name="twitter:creator" content="@_dev_power_">

<!-- Open Graph -->
<meta property="og:locale" content="en_GB">
<meta property="og:type" content="article">
<meta property="og:title" content="Developing a custom monitoring tool in C# for SpacePool Chia cryptocurrency farming">
<meta property="og:description" content="This post discusses how to get an API key and develop a C# application to verify your farm is healthy.">
<meta property="og:url" content="https://devpower.co.uk/cryptocurrency/monitoring-chia-spacepool/">
<meta property="og:site_name" content="DevPower">
<meta property="og:image" content="https://devpower.co.uk/images/">





<link rel="canonical" href="https://devpower.co.uk/cryptocurrency/monitoring-chia-spacepool/">
<link href="https://devpower.co.uk/feed.xml" type="application/atom+xml" rel="alternate" title="DevPower Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>

<!-- For all browsers -->
<link rel="stylesheet" href="https://devpower.co.uk/assets/css/main.css">
<link rel="stylesheet" href="https://devpower.co.uk/assets/css/jquery.mmenu.all.css">
<link rel="stylesheet" href="https://devpower.co.uk/assets/css/jquery.floating-social-share.min.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script type="text/javascript" src="https://devpower.co.uk/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="https://devpower.co.uk/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="https://devpower.co.uk/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://devpower.co.uk/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://devpower.co.uk/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://devpower.co.uk/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://devpower.co.uk/images/apple-touch-icon-144x144-precomposed.png">




</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->



<div class="header-menu header-menu-top">
    <ul class="header-item-container">
      <li class="header-item-title header-toggle "><a href="#menu"><h2><i class="fa fa-bars"></i></h2></a></li>
      <li class="header-item-title">
        <a href="https://devpower.co.uk/">
          
          </a><a href="https://devpower.co.uk/" class="title"> DevPower</a>
        
      </li>
      
      <!-- <li class="header-item"><a href="https://devpower.co.uk/search"><h3><i class="fa fa-search"></i></h3></a></li> -->
    </ul>
  </div>
<div class="entry-header">
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Developing a custom monitoring tool in C# for SpacePool Chia cryptocurrency farming</h1>
      
        <h2><span class="entry-date date published updated"><time datetime="2021-12-08T00:00:00+00:00">December 08, 2021</time></span></h2>
      

      
        <p class="entry-reading-time">
          <i class="fa fa-clock-o"></i>
          
          Reading time ~2 minutes
        </p>
<!-- /.entry-reading-time -->
      
    </div>
<!-- /.header-title-wrap -->
  </div>
<!-- /.header-title -->
</div><!-- /.entry-header -->


<nav id="menu" style="display: none">
  <ul>
    
  </ul>
</nav>


  <a href="https://twitter.com/_dev_power_" class="btn btn-info button-twitter" data-show-count="false" data-size="large" target="_blank" rel="noopener noreferrer"><i class="fa fa-twitter"></i> <span> | Follow @_dev_power_</span></a>



<div id="main" role="main">
  <article class="hentry">
    <div class="entry-content">
        
      <h1 class="post-title entry-title">Developing a custom monitoring tool in C# for SpacePool Chia cryptocurrency farming</h1>
      <p>If you are one of the crypto early adopters, the chances are that you’ve heard about a new cryptocurrency called <a href="https://chia.net" target="_blank" rel="noopener noreferrer">Chia</a>. In this post, we will develop a simple monitoring tool to send alerts if Chia farming stops. We are going to use SpacePool’s Developer API to achieve this.</p>

<h2 id="getting-started">Getting Started</h2>
<p>The best resource to get started is SpacePool’s own <a href="https://blog.pool.space/how-to-get-started-with-space-pool-developer-apis-915b153b2c40" target="_blank" rel="noopener noreferrer">blog post</a></p>

<p>First of all, we will need an API key and as of this writing, obtaining a key is a manual process. You have to explain your use case in their Discord server by answering a list of fixed questions (listed in the blog post), and you’ll get a private message with your key.</p>

<h3 id="testing-the-key">Testing the key</h3>
<p>The easiest way to test your setup is to visit the <a href="https://developer.pool.space/" target="_blank" rel="noopener noreferrer">API reference</a></p>

<p>Enter your launcher id, API key and some value for User-Agent. Then, when you click the Try It Out button, you should be able to see some results as shown in the screenshot below:</p>

<p><img src="/images/post-images/2021/12/spacepool/api-reference-page.png" alt=""></p>

<h2 id="developing-a-custom-application">Developing a custom application</h2>

<p>It’s a REST API with OpenAPI specs at https://developer.pool.space/api/v1/docs/openapi.json. I used this to generate my C# client:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">docker</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="nt">--rm</span><span class="w"> </span><span class="nt">-v</span><span class="w"> </span><span class="s2">"</span><span class="nv">${PWD}</span><span class="s2">:/local"</span><span class="w"> </span><span class="nx">openapitools/openapi-generator-cli</span><span class="w"> </span><span class="nx">generate</span><span class="w"> </span><span class="se">`
</span><span class="w">    </span><span class="nt">-i</span><span class="w"> </span><span class="nx">https://developer.pool.space/api/v1/docs/openapi.json</span><span class="w"> </span><span class="se">`
</span><span class="w">    </span><span class="nt">-g</span><span class="w"> </span><span class="nx">csharp-netcore</span><span class="w"> </span><span class="se">`
</span><span class="w">    </span><span class="nt">-o</span><span class="w"> </span><span class="nx">/local/csharp-netcore</span><span class="w">
</span></code></pre></div></div>

<p>The generated project has the API clients for the endpoints:</p>

<p><img src="/images/post-images/2021/12/spacepool/auto-generated-api-client.png" alt=""></p>

<p>For monitoring purposes, we are interested in the GetFarmPartialsV1Api endpoint.</p>

<p>Here’s my simple console application that calls the endpoint and checks if the latest verified submission happened within an expected timeframe:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">const</span> <span class="kt">string</span> <span class="n">launcherId</span> <span class="p">=</span> <span class="s">"{launcher id}"</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">string</span> <span class="n">apiKey</span> <span class="p">=</span> <span class="s">"{api key}"</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">string</span> <span class="n">userAgent</span> <span class="p">=</span> <span class="s">"{custom user agent}"</span><span class="p">;</span>

<span class="kt">var</span> <span class="n">apiClient</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">GetFarmPartialsV1Api</span><span class="p">();</span>
<span class="kt">var</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">apiClient</span><span class="p">.</span><span class="nf">ApiV1FarmsLauncherIdOrAliasPartialsGetAsync</span><span class="p">(</span><span class="n">launcherId</span><span class="p">,</span> <span class="n">apiKey</span><span class="p">,</span> <span class="n">userAgent</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">latestSuccessfulSubmission</span> <span class="p">=</span> <span class="n">response</span><span class="p">.</span><span class="n">Results</span>
    <span class="p">.</span><span class="nf">OrderByDescending</span><span class="p">(</span><span class="n">r</span> <span class="p">=&gt;</span> <span class="n">r</span><span class="p">.</span><span class="n">SubmissionDateTimeUtc</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">FirstOrDefault</span><span class="p">(</span><span class="n">r</span> <span class="p">=&gt;</span> <span class="n">r</span><span class="p">.</span><span class="n">State</span><span class="p">.</span><span class="n">Description</span> <span class="p">==</span> <span class="s">"Verified"</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="n">latestSuccessfulSubmission</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"No verified partials"</span><span class="p">);</span>
    <span class="c1">// Send an alert somewhere </span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">var</span> <span class="n">timeElapsedSinceLastVerifiedPartial</span> <span class="p">=</span>
    <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span> <span class="p">-</span> <span class="n">DateTime</span><span class="p">.</span><span class="nf">Parse</span><span class="p">(</span><span class="n">latestSuccessfulSubmission</span><span class="p">.</span><span class="n">SubmissionDateTimeUtc</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">interval</span> <span class="p">=</span> <span class="m">10</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="n">timeElapsedSinceLastVerifiedPartial</span><span class="p">.</span><span class="n">TotalMinutes</span> <span class="p">&gt;=</span> <span class="n">interval</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"No verified partials in the last </span><span class="p">{</span><span class="n">interval</span><span class="p">}</span><span class="s"> minutes"</span><span class="p">);</span>
    <span class="c1">// Send an alert somewhere </span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Last verified partial received </span><span class="p">{</span><span class="n">Math</span><span class="p">.</span><span class="nf">Floor</span><span class="p">(</span><span class="n">timeElapsedSinceLastVerifiedPartial</span><span class="p">.</span><span class="n">TotalMinutes</span><span class="p">)}</span><span class="s"> minutes ago. All looking good."</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>and after we run the application, we can see it checks the results:</p>

<p><img src="/images/post-images/2021/12/spacepool/test-result.png" alt=""></p>

<h1 id="conclusion">Conclusion</h1>
<p>In this post, we looked into generating API clients automatically from an OpenAPI spec. Then used the client to talk to the SpacePool API and get some information about our Chia farm.</p>

<p>I left out sending the actual alerts as they are open-ended, and anyone can customize them to fit their system. In the future, I might post a complete Dockerized solution so that the deployment can be as simple as running a container and providing it with the launcher id and API key.</p>

<p>Let me know if this is of any interest to you to prioritize it over other content.</p>

<p>Happy farming!</p>

<h2 id="resources">Resources</h2>
<ul>
  <li><a href="https://pool.space" target="_blank" rel="noopener noreferrer">SpacePool official website</a></li>
  <li><a href="https://developer.pool.space/" target="_blank" rel="noopener noreferrer">SpacePool API reference</a></li>
  <li><a href="https://blog.pool.space/how-to-get-started-with-space-pool-developer-apis-915b153b2c40" target="_blank" rel="noopener noreferrer">SpacePool blog post on getting started with the API</a></li>
  <li><a href="https://chia.net" target="_blank" rel="noopener noreferrer">Chia official website</a></li>
</ul>

      <footer class="entry-meta">
        <span class="entry-tags"><a href="https://devpower.co.uk/tags#chia" title="Pages tagged chia" class="tag"><span class="term">chia</span></a><a href="https://devpower.co.uk/tags#spacepool" title="Pages tagged spacepool" class="tag"><span class="term">spacepool</span></a><a href="https://devpower.co.uk/tags#monitoring" title="Pages tagged monitoring" class="tag"><span class="term">monitoring</span></a></span>
        
        <span class="author vcard"><span class="fn">Volkan Paksoy</span></span>
        <div class="social-share">
  <ul class="socialcount socialcount-small inline-list">
    <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=https://devpower.co.uk/cryptocurrency/monitoring-chia-spacepool/" title="Share on Facebook" target="_blank" rel="noopener noreferrer"><span class="count"><i class="fa fa-facebook-square"></i> Like</span></a></li>
    <li class="twitter"><a href="https://twitter.com/intent/tweet?text=https://devpower.co.uk/cryptocurrency/monitoring-chia-spacepool/" title="Share on Twitter" target="_blank" rel="noopener noreferrer"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a></li>
    <!-- <li class="googleplus"><a href="https://plus.google.com/share?url=https://devpower.co.uk/cryptocurrency/monitoring-chia-spacepool/" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a></li> -->
  </ul>
</div>
<!-- /.social-share -->

      </footer>
    </div>
<!-- /.entry-content -->
    <div class="read-more">
  <div class="read-more-header">
    <a href="https://devpower.co.uk" class="read-more-btn">About the Author</a>
  </div>
<!-- /.read-more-header -->
  <div class="read-more-content author-info">
    <h3>Volkan Paksoy</h3>
    <div class="author-container">
      <img class="author-img" src="https://devpower.co.uk/images/avatar.jpg" alt="Volkan Paksoy">
      <div class="author-bio"></div>
    </div>
    <div class="author-share">
      <ul class="list-inline social-buttons">
        
          <li><a href="https://github.com/Dev-Power" target="_blank" rel="noopener noreferrer"><i class="fa fa-github fa-fw"></i></a></li>
        
          <li><a href="https://www.youtube.com/channel/UC9YE-1HhpfC-1DqhHxqUUfw" target="_blank" rel="noopener noreferrer"><i class="fa fa-youtube fa-fw"></i></a></li>
        
      </ul>
      
      <br>
      
        <a href="https://twitter.com/_dev_power_" class="twitter-follow-button" data-show-count="false" data-size="large" target="_blank" rel="noopener noreferrer">Follow @_dev_power_</a>
      
    </div>
  </div>
</div>

    
    <div class="read-more">
  
    <div class="read-more-header">
      <a href="https://devpower.co.uk/docker/blogging-with-Jekyll-and-Docker/" class="read-more-btn">Read More</a>
    </div>
<!-- /.read-more-header -->
    <div class="read-more-content">
      <h3><a href="https://devpower.co.uk/tips_n_tricks/linqpad-dump-extension-dump/" title="LINQPad Dump Extension Method">LINQPad Dump Extension Method</a></h3>
      <p>A quick tip on LINQPad's Dump method <a href="https://devpower.co.uk/tips_n_tricks/linqpad-dump-extension-dump/">Continue reading</a></p>
    </div>
<!-- /.read-more-content -->
  
  <div class="read-more-list">
    
      <div class="list-item">
        <h4><a href="https://devpower.co.uk/docker/blogging-with-Jekyll-and-Docker/" title="Blogging with Jekyll and Docker">Blogging with Jekyll and Docker</a></h4>
        <span>Published on November 16, 2021</span>
      </div>
<!-- /.list-item -->
    
      <div class="list-item">
        <h4><a href="https://devpower.co.uk/intro/hello-world/" title="Hello, World!">Hello, World!</a></h4>
        <span>Published on October 04, 2021</span>
      </div>
<!-- /.list-item -->
    
  </div>
<!-- /.read-more-list -->
</div>
<!-- /.read-more -->
  </article>
</div><!-- /#main -->

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">window.jQuery || document.write('<script type="text/javascript" src="https://devpower.co.uk/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script type="text/javascript" src="https://devpower.co.uk/assets/js/scripts.min.js"></script>
<script type="text/javascript" async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>
<script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>



<!-- Asynchronous Google Analytics snippet -->
<!--script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'G-V0VB7KHEQV', 'auto');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script-->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-V0VB7KHEQV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-V0VB7KHEQV');
</script>









<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>© 2021 DevPower.co.uk </span>

  </footer>
</div><!-- /.footer-wrapper -->

</body>
</html>

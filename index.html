<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>💪 Welcome to Dev Power 💪 &#8211; 💪 Dev Power</title>
<meta name="description" content="The place for the most comprehensive tech articles">
<meta name="keywords" content="dev, software, programming, code, tech">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@_dev_power_">
<meta name="twitter:creator" content="@_dev_power_">

<!-- Open Graph -->
<meta property="og:locale" content="en_GB">
<meta property="og:type" content="article">
<meta property="og:title" content="💪 Welcome to Dev Power 💪">
<meta property="og:description" content="The place for the most comprehensive tech articles">
<meta property="og:url" content="https://devpower.co.uk/">
<meta property="og:site_name" content="💪 Dev Power">
<meta property="og:image" content="https://devpower.co.uk/images/">





<link rel="canonical" href="https://devpower.co.uk/">
<link href="https://devpower.co.uk/feed.xml" type="application/atom+xml" rel="alternate" title="💪 Dev Power Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>

<!-- For all browsers -->
<link rel="stylesheet" href="https://devpower.co.uk/assets/css/main.css">
<link rel="stylesheet" href="https://devpower.co.uk/assets/css/jquery.mmenu.all.css">
<link rel="stylesheet" href="https://devpower.co.uk/assets/css/jquery.floating-social-share.min.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script type="text/javascript" src="https://devpower.co.uk/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="https://devpower.co.uk/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="https://devpower.co.uk/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://devpower.co.uk/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://devpower.co.uk/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://devpower.co.uk/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://devpower.co.uk/images/apple-touch-icon-144x144-precomposed.png">




<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5266062674794996"
     crossorigin="anonymous"></script>
</head>

<body id="post-index">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->



<div class="header-menu header-menu-top">
    <ul class="header-item-container">
      <li class="header-item-title header-toggle "><a href="#menu"><h2><i class="fa fa-bars"></i></h2></a></li>
      <li class="header-item-title">
        <a href="https://devpower.co.uk/">
          
          </a><a href="https://devpower.co.uk/" class="title"> 💪 Dev Power</a>
        
      </li>
      
        
        

        
          <li class="header-item ">
<a href="https://devpower.co.uk/categories"><h3>Categories</h3></a>
            <ul class="header-submenu">
              
                
                  <li class="sub-item"><a href="https://devpower.co.uk/categories/#aws">aws</a></li>
              
                
                  <li class="sub-item"><a href="https://devpower.co.uk/categories/#cryptocurrency">cryptocurrency</a></li>
              
                
                  <li class="sub-item"><a href="https://devpower.co.uk/categories/#docker">docker</a></li>
              
                
                  <li class="sub-item"><a href="https://devpower.co.uk/categories/#meta">meta</a></li>
              
                
                  <li class="sub-item"><a href="https://devpower.co.uk/categories/#powershell">powershell</a></li>
              
                
                  <li class="sub-item"><a href="https://devpower.co.uk/categories/#tips_n_tricks">tips_n_tricks</a></li>
              
            </ul>
          </li>
        
      
        
        

        
            
                <li class="header-item "><a href="https://devpower.co.uk/tags"><h3>Tags</h3></a></li>
            
        
      
        
        

        
            
                <li class="header-item "><a href="https://devpower.co.uk/"><h3>Home</h3></a></li>
            
        
      
      <!-- <li class="header-item"><a href="https://devpower.co.uk/search"><h3><i class="fa fa-search"></i></h3></a></li> -->
    </ul>
  </div>
<div class="entry-header">
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>💪 Welcome to Dev Power 💪</h1>
      <h2>skills are everything</h2>
      
        <h2><span class="entry-date"><time> </time></span></h2>
      

      
          <p class="entry-reading-time">
             
          </p>
<!-- /.entry-reading-time -->
      
    </div>
<!-- /.header-title-wrap -->
  </div>
<!-- /.header-title -->
</div><!-- /.entry-header -->


<nav id="menu" style="display: none">
  <ul>
    
      
        <li><a href="https://devpower.co.uk/"><h3>Home</h3></a></li>
      
    
      
        <li><a href="https://devpower.co.uk/tags"><h3>Tags</h3></a></li>
      
    
      
        <li>
<a href="https://devpower.co.uk/categories"><h3>Categories</h3></a>
          <ul>
            
              
                <li><a href="https://devpower.co.uk/categories/#aws">aws</a></li>
            
              
                <li><a href="https://devpower.co.uk/categories/#cryptocurrency">cryptocurrency</a></li>
            
              
                <li><a href="https://devpower.co.uk/categories/#docker">docker</a></li>
            
              
                <li><a href="https://devpower.co.uk/categories/#meta">meta</a></li>
            
              
                <li><a href="https://devpower.co.uk/categories/#powershell">powershell</a></li>
            
              
                <li><a href="https://devpower.co.uk/categories/#tips_n_tricks">tips_n_tricks</a></li>
            
          </ul>
        </li>
      
    
  </ul>
</nav>


  <a href="https://twitter.com/_dev_power_" class="btn btn-info button-twitter" data-show-count="false" data-size="large" target="_blank" rel="noopener noreferrer"><i class="fa fa-twitter"></i> <span> | Follow Dev Power on Twitter</span></a>



<div id="main" role="main">
  
<article class="hentry">
  <header>
    
      <div class="entry-image-index">
        <a href="https://devpower.co.uk/aws/powershell/working-with-aws-s3-and-file-hashes/" title="Working with AWS S3 and file hashes"><img src="https://devpower.co.uk/images/Add%20files-bro.svg" alt="Working with AWS S3 and file hashes"></a>
        

      </div>
<!-- /.entry-image -->
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2021-12-15T00:00:00+00:00"><a href="https://devpower.co.uk/aws/powershell/working-with-aws-s3-and-file-hashes/">December 15, 2021</a></time></span><span class="author vcard"><span class="fn"><a href="https://devpower.co.uk/about/" title="About Volkan Paksoy">Volkan Paksoy</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~2 minutes
      </span><!-- /.entry-reading-time -->
      
    </div>
<!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://devpower.co.uk/aws/powershell/working-with-aws-s3-and-file-hashes/" rel="bookmark" title="Working with AWS S3 and file hashes" itemprop="url">Working with AWS S3 and file hashes</a></h1>
    
  </header>
  <div class="entry-content">
      <p>Hashing is the operation of creating a unique, fixed-length string from any piece of data. The output is called a “hash” or “message digest”. It is a one-way operation meaning that you can obtain the original message by reverse-engineering the digest even if you knew the hashing algorithm used to create it. I love using hashes as they can provide great value in maintaining the security and integrity of our data.</p>

<h2 id="calculating-file-hashes-using-powershell">Calculating file hashes using PowerShell</h2>
<p>The cmdlet to use in PowerShell is <strong>Get-FileHash</strong></p>

<p>Usage is very straightforward. You provide it with the path and the hashing algorithm you want to use:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Get-FileHash</span><span class="w">
   </span><span class="p">[</span><span class="nt">-Path</span><span class="p">]</span><span class="w"> </span><span class="err">&lt;</span><span class="nx">String</span><span class="p">[]</span><span class="err">&gt;</span><span class="w">
   </span><span class="p">[[</span><span class="nt">-Algorithm</span><span class="p">]</span><span class="w"> </span><span class="err">&lt;</span><span class="n">String</span><span class="err">&gt;</span><span class="p">]</span><span class="w">
   </span><span class="p">[</span><span class="err">&lt;</span><span class="n">CommonParameters</span><span class="err">&gt;</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p>As you can see above, the Path parameter is a string array so you can use it to calculate multiple hashes.</p>

<h2 id="how-to-use-file-hashes-with-aws-s3">How to use file hashes with AWS S3</h2>
<p>To verify the file’s integrity during upload, we can use <strong>Content-MD5</strong> HTTP header. This header is not specific to AWS, but it fits perfectly when uploading files, especially if they are quite big media files.</p>

<p class="panel-note">Content-MD5 value has to be converted to Base64 before it’s sent in the request</p>

<h2 id="preparing-the-lab-environment">Preparing the lab environment</h2>

<h3 id="downloading-a-sample-file">Downloading a sample file</h3>
<p>The file I worked with is a sample that’s publicly available <a href="https://file-examples-com.github.io/uploads/2017/11/file_example_MP3_5MG.mp3" target="_blank" rel="noopener noreferrer">here</a></p>

<p>I first fetched the file to my local lab:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">wget</span><span class="w"> </span><span class="nx">https://file-examples-com.github.io/uploads/2017/11/file_example_MP3_5MG.mp3</span><span class="w">
</span></code></pre></div></div>

<p><img src="/images/post-images/2021/12/file-hashes/wget-sample-file.png" alt=""></p>

<h3 id="generate-md5-hash">Generate MD5 hash</h3>
<p>To get the MD5 hash, I ran the following command:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Get-FileHash</span><span class="w"> </span><span class="nt">-Path</span><span class="w"> </span><span class="o">.</span><span class="nx">/file_example_MP3_5MG.mp3</span><span class="w"> </span><span class="nt">-Algorithm</span><span class="w"> </span><span class="nx">MD5</span><span class="w">
</span></code></pre></div></div>

<p>and the output is:</p>

<p><img src="/images/post-images/2021/12/file-hashes/get-filehash-output.png" alt=""></p>

<h3 id="create-target-bucket">Create target bucket</h3>
<p>Creating a new S3 bucket is simple as follows:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">New-S3Bucket</span><span class="w"> </span><span class="nt">-BucketName</span><span class="w"> </span><span class="s2">"filehash-workout"</span><span class="w"> 
</span></code></pre></div></div>

<h3 id="send-the-file-with-hash">Send the file with hash</h3>
<p>Fortunately for us, AWS provides an easy way to use MD5 hashes when uploading the file with <strong>Write-S3Object</strong>. It automatically calculates the hash value for us:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Write-S3Object</span><span class="w"> </span><span class="nt">-BucketName</span><span class="w"> </span><span class="s2">"filehash-workout"</span><span class="w"> </span><span class="nt">-File</span><span class="w"> </span><span class="o">.</span><span class="nx">/file_example_MP3_5MG.mp3</span><span class="w">
</span></code></pre></div></div>

<p>The MD5 value is stored as Etag value and can be seen on AWS Management Console:</p>

<p><img src="/images/post-images/2021/12/file-hashes/md5-on-aws-management-console.png" alt=""></p>

<h3 id="check-the-file-hash">Check the file hash</h3>
<p>As the final step, we need to pass the MD5 hash of the file on our end and see if it matches the value on AWS:</p>

<p class="panel-note">Please note from the above, hash value is stored in all lowercase on AWS</p>

<p>If we send the file hash as we get from Get-FileHash we get the following error:</p>

<p><img src="/images/post-images/2021/12/file-hashes/etag-mismatch-error.png" alt=""></p>

<p>When we convert the hash value to lowercase, we can get successful result:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$filehash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Get-FileHash</span><span class="w"> </span><span class="nt">-Path</span><span class="w"> </span><span class="o">.</span><span class="nx">/file_example_MP3_5MG.mp3</span><span class="w"> </span><span class="nt">-Algorithm</span><span class="w"> </span><span class="nx">MD5</span><span class="p">)</span><span class="o">.</span><span class="nf">Hash</span><span class="w">
</span><span class="n">Get-S3ObjectMetadata</span><span class="w"> </span><span class="nt">-BucketName</span><span class="w"> </span><span class="s2">"filehash-workout"</span><span class="w"> </span><span class="nt">-Key</span><span class="w"> </span><span class="s2">"file_example_MP3_5MG.mp3"</span><span class="w"> </span><span class="nt">-EtagToMatch</span><span class="w"> </span><span class="s2">"</span><span class="nv">$filehash</span><span class="s2">"</span><span class="o">.</span><span class="nf">ToLower</span><span class="p">()</span><span class="w">
</span></code></pre></div></div>

<p><img src="/images/post-images/2021/12/file-hashes/etag-match-success.png" alt=""></p>

<p class="panel-warning">This technique works for files up to 16MB. For larger files, Write-S3Object uses multipart upload, and the ETag value becomes the MD5 hash of the part.</p>

<h3 id="clean-up">Clean Up</h3>
<p>It’s always a good practice to clean up after a lab session:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Remove-S3Bucket</span><span class="w"> </span><span class="s2">"filehash-workout"</span><span class="w"> </span><span class="nt">-DeleteBucketContent</span><span class="w"> </span><span class="nt">-Force</span><span class="w">
</span><span class="n">Remove-Item</span><span class="w"> </span><span class="o">.</span><span class="nx">/file_example_MP3_5MG.mp3</span><span class="w">
</span></code></pre></div></div>

<h2 id="resources">Resources</h2>
<ul>
  <li><a href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/get-filehash" target="_blank" rel="noopener noreferrer">Get-FileHash Documentation</a></li>
  <li><a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_PutObject.html" target="_blank" rel="noopener noreferrer">AWS S3 PutObject API reference</a></li>
  <li><a href="https://storyset.com/work" target="_blank" rel="noopener noreferrer">Work illustrations by Storyset</a></li>
</ul>

      
  </div>
<!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
      <div class="entry-image-index">
        <a href="https://devpower.co.uk/tips_n_tricks/aws/customizing-aws-iam-sign-in-url/" title="Customizing AWS IAM Sign-in URL"><img src="https://devpower.co.uk/images/Mar-Business_2.jpg" alt="Customizing AWS IAM Sign-in URL"></a>
        

      </div>
<!-- /.entry-image -->
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2021-12-13T00:00:00+00:00"><a href="https://devpower.co.uk/tips_n_tricks/aws/customizing-aws-iam-sign-in-url/">December 13, 2021</a></time></span><span class="author vcard"><span class="fn"><a href="https://devpower.co.uk/about/" title="About Volkan Paksoy">Volkan Paksoy</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div>
<!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://devpower.co.uk/tips_n_tricks/aws/customizing-aws-iam-sign-in-url/" rel="bookmark" title="Customizing AWS IAM Sign-in URL" itemprop="url">Customizing AWS IAM Sign-in URL</a></h1>
    
  </header>
  <div class="entry-content">
      <p>Normally the login URL for IAM users is in this format</p>

<blockquote>
  <p>https://{Account Id}.signin.aws.amazon.com/console</p>
</blockquote>

<p>But it is possible to make this URL more memorable and user-friendly.</p>

<p>In order to achieve this, follow the steps below:</p>

<p><strong>Step 01</strong>: Go to <a href="https://console.aws.amazon.com/iamv2/home#/home" target="_blank" rel="noopener noreferrer">IAM Dashboard</a></p>

<p><strong>Step 02</strong>: Click on the <strong>Create</strong> link that is located right next to the account id:</p>

<p><img src="/images/post-images/2021/12/customizing-iam-url/iam-dashboard.png" alt=""></p>

<p><strong>Step 03</strong>: This brings up the <em>Create Account Alias</em> dialog box.</p>

<p><img src="/images/post-images/2021/12/customizing-iam-url/create-alias-01.png" alt=""></p>

<p><strong>Step 03</strong>: Enter your desired alias and save.</p>

<p class="panel-warning top-padding">Since the name we provide is used in the URL, it needs to be unique globally. </p>

<p>If you don’t pick a unique name, you will get an error like this:</p>

<p><img src="/images/post-images/2021/12/customizing-iam-url/create-alias-error.png" alt=""></p>

<p>and when you pick your unique name, you should see it in effect:</p>

<p><img src="/images/post-images/2021/12/customizing-iam-url/create-alias-success.png" alt=""></p>

<p class="panel-note">You can keep on using the account id. Setting an alias just gives an additional URL that you can use.</p>

<h2 id="resources">Resources</h2>
<ul>
  <li><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/console_account-alias.html" target="_blank" rel="noopener noreferrer">AWS Documentation: Your AWS account ID and its alias</a></li>
  <li><a href="https://www.freepik.com/vectors/people" target="_blank" rel="noopener noreferrer">People vector created by jcomp - www.freepik.com</a></li>
</ul>

      
  </div>
<!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2021-12-12T00:00:00+00:00"><a href="https://devpower.co.uk/cryptocurrency/docker/dockerizing-spacepool-monitor/">December 12, 2021</a></time></span><span class="author vcard"><span class="fn"><a href="https://devpower.co.uk/about/" title="About Volkan Paksoy">Volkan Paksoy</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div>
<!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://devpower.co.uk/cryptocurrency/docker/dockerizing-spacepool-monitor/" rel="bookmark" title="Dockerizing SpacePool Monitor" itemprop="url">Dockerizing SpacePool Monitor</a></h1>
    
  </header>
  <div class="entry-content">
      <p>In a previous <a href="https://devpower.co.uk/cryptocurrency/monitoring-chia-spacepool/">post</a>, we looked at a simple C# application that uses SpacePool API to get information about our Chia farm. In this post, we are going to Dockerize the application.</p>

<p>The core part of the application is still the same. It gets the latest partials from SpacePool API and checks if they are within an acceptable timeframe.</p>

<p>What’s new in this release is as follows:</p>
<ul>
  <li>Sends emails as alert notifications</li>
  <li>Main application is a Worker Service to run every n minutes (n being CheckIntervalInMinutes environment variable)</li>
  <li>Application runs in a Docker container so it can be easily pulled from Docker Hub</li>
</ul>

<h2 id="usage">Usage</h2>
<p>The easiest way to use the application is to download docker-compose-template.yaml, rename it to docker-compose.yaml and fill in the values. To be able to get alert notifications, you’re going to need</p>

<ul>
  <li>SpacePool API key and launcher id</li>
  <li>An email address that you can use to send and receive emails</li>
</ul>

<p>The template looks like this:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3.9"</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">spacepool-monitor</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">devpowercouk/spacepool-monitor</span>
    <span class="na">build</span><span class="pi">:</span>
      <span class="na">context</span><span class="pi">:</span> <span class="s">.</span>
      <span class="na">dockerfile</span><span class="pi">:</span> <span class="s">SpacePoolMonitor.WorkerService/Dockerfile</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">AppSettings__LauncherId</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
      <span class="na">AppSettings__ApiKey</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
      <span class="na">AppSettings__UserAgent</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
      <span class="na">AppSettings__CheckIntervalInMinutes</span><span class="pi">:</span> <span class="m">30</span>
      <span class="na">EmailSettings__FromAddress</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
      <span class="na">EmailSettings__ToAddress</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
      <span class="na">EmailSettings__Subject</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
      <span class="na">EmailSettings__FromName</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
      <span class="na">SmtpSettings__Host</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
      <span class="na">SmtpSettings__Username</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
      <span class="na">SmtpSettings__Password</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
      <span class="na">SmtpSettings__Port</span><span class="pi">:</span> <span class="m">587</span>
</code></pre></div></div>

<p>After you updated the configuration with your values simply run the following command in terminal</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker-compose up
</code></pre></div></div>

<p>Then you can monitor the application logs to check if it’s working:</p>

<p><img src="/images/post-images/2021/12/dockerizing-spacepool-monitor/results.png" alt=""></p>

<p>Once you’ve confirmed everything’s working, you can run it in the background with the following command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker-compose up -d
</code></pre></div></div>

<h2 id="resources">Resources</h2>
<ul>
  <li><a href="https://github.com/Dev-Power/monitoring-chia-spacepool" target="_blank" rel="noopener noreferrer">Source code for the application on GitHub</a></li>
  <li><a href="https://hub.docker.com/repository/docker/devpowercouk/spacepool-monitor" target="_blank" rel="noopener noreferrer">Docker image on Docker Hub</a></li>
</ul>

      
  </div>
<!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2021-12-12T00:00:00+00:00"><a href="https://devpower.co.uk/tips_n_tricks/aws/counting-objects-in-aws-s3/">December 12, 2021</a></time></span><span class="author vcard"><span class="fn"><a href="https://devpower.co.uk/about/" title="About Volkan Paksoy">Volkan Paksoy</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div>
<!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://devpower.co.uk/tips_n_tricks/aws/counting-objects-in-aws-s3/" rel="bookmark" title="Counting Objects in AWS S3" itemprop="url">Counting Objects in AWS S3</a></h1>
    
  </header>
  <div class="entry-content">
      <p>Yesterday I had to find the count of objects in a folder in an S3 bucket. Unfortunately, I only had access to AWS via the command line and was working on a Windows Server.</p>

<h2 id="using-aws-cli">Using AWS CLI</h2>
<p>After digging around, I found the solution using PowerShells’ Measure-Object cmdlet.</p>

<p>The solution to getting the object count was:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws s3 ls s3://{bucket}/path/to/files | Measure-Object
</code></pre></div></div>

<p>This can be used in local folders as well. It also can be used to get the minimum/maximum/average/total size of the folder too so quite handy to get some quick stats about a folder/bucket</p>

<h2 id="using-aws-tools-for-powershell">Using AWS Tools for PowerShell</h2>
<p>If you have AWS Tools for PowerShell installed, you can achieve the same goal by running Get-S3Object cmdlet like this:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Get-S3Object</span><span class="w"> </span><span class="nt">-BucketName</span><span class="w"> </span><span class="p">{</span><span class="n">bucket</span><span class="p">}</span><span class="w"> </span><span class="nt">-Prefix</span><span class="w"> </span><span class="n">path/to/files</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Measure-Object</span><span class="w">
</span></code></pre></div></div>

<p>Alternatively, if you want to get the object count, you can run this as well:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">Get-S3Object</span><span class="w"> </span><span class="nt">-BucketName</span><span class="w"> </span><span class="p">{</span><span class="n">bucket</span><span class="p">}</span><span class="w"> </span><span class="nt">-Prefix</span><span class="w"> </span><span class="n">path/to/files</span><span class="p">)</span><span class="o">.</span><span class="nf">Count</span><span class="w">
</span></code></pre></div></div>

<h2 id="resources">Resources</h2>
<ul>
  <li><a href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/measure-object" target="_blank" rel="noopener noreferrer">Measure-Object documentation</a></li>
</ul>

      
  </div>
<!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2021-12-10T00:00:00+00:00"><a href="https://devpower.co.uk/powershell/easiest-way-for-csv-json-conversion/">December 10, 2021</a></time></span><span class="author vcard"><span class="fn"><a href="https://devpower.co.uk/about/" title="About Volkan Paksoy">Volkan Paksoy</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div>
<!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://devpower.co.uk/powershell/easiest-way-for-csv-json-conversion/" rel="bookmark" title="Easy Way to Convert Between CSV/JSON/XML with PowerShell" itemprop="url">Easy Way to Convert Between CSV/JSON/XML with PowerShell</a></h1>
    
  </header>
  <div class="entry-content">
      <p>Sometimes I’m amazed by how some tasks are easy to carry out using PowerShell. One such task is converting various common data types such as CSV, JSON and XML. PowerShell has built-in support for all these types.</p>

<h2 id="convert-csv-to-json">Convert CSV to JSON</h2>
<p>For example, let’s say we have the following customer data in a CSV file named customers.csv
#</p>
<pre><code class="language-csv">Id,FirstName,LastName,Country,Status
1,James,Monroe,USA,Active
2,Diane,Wheatley,UK,Active
3,Sara,Bailey,UK,Suspended
</code></pre>

<p>If we want to convert this data into JSON, we can run the following command in PowerShell:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Import-Csv</span><span class="w"> </span><span class="o">.</span><span class="nx">/customers.csv</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ConvertTo-Json</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Out-File</span><span class="w"> </span><span class="o">.</span><span class="nx">/customers.json</span><span class="w">
</span></code></pre></div></div>

<p>we get the following JSON output:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"FirstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"James"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"LastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Monroe"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USA"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Active"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"FirstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Diane"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"LastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Wheatley"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UK"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Active"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"Id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"FirstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sara"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"LastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bailey"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UK"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Suspended"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p>The output JSON is indented by default, so very easy to read as well.</p>

<h2 id="convert-json-to-csv">Convert JSON to CSV</h2>
<p>If we want to reverse the process and create a CSV file from a JSON input, we can run the following:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">Get-Content</span><span class="w"> </span><span class="nt">-Path</span><span class="w"> </span><span class="o">.</span><span class="nx">/customers.json</span><span class="w"> </span><span class="nt">-Raw</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ConvertFrom-Json</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Export-CSV</span><span class="w"> </span><span class="o">.</span><span class="nx">/customers.csv</span><span class="w">
</span></code></pre></div></div>

<p>and get a CSV that looks like:</p>

<pre><code class="language-csv">"Id","FirstName","LastName","Country","Status"
"1","James","Monroe","USA","Active"
"2","Diane","Wheatley","UK","Active"
"3","Sara","Bailey","UK","Suspended"
</code></pre>

<p>I used <strong>Export-CSV</strong> cmdlet in this example because it saves the output to a file. We can also use <strong>ConvertTo-Csv</strong> cmdlet</p>

<p>For example, the following snippet print the results to the console:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">Get-Content</span><span class="w"> </span><span class="nt">-Path</span><span class="w"> </span><span class="o">.</span><span class="nx">/customers.json</span><span class="w"> </span><span class="nt">-Raw</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ConvertFrom-Json</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ConvertTo-Csv</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Write-Host</span><span class="w">
</span></code></pre></div></div>

<h2 id="convert-json-to-xml">Convert JSON to XML</h2>
<p>Similar to JSON, we can use <strong>ConvertTo-XML</strong> cmdlet to create an XML file out of our sample JSON:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Export-Clixml</span><span class="w"> </span><span class="nt">-Depth</span><span class="w"> </span><span class="nx">3</span><span class="w"> </span><span class="nt">-InputObject</span><span class="w"> </span><span class="p">((</span><span class="n">Get-Content</span><span class="w"> </span><span class="nt">-Path</span><span class="w"> </span><span class="o">.</span><span class="nx">/customers.json</span><span class="w"> </span><span class="nt">-Raw</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ConvertFrom-Json</span><span class="p">)</span><span class="w"> </span><span class="nt">-Path</span><span class="w"> </span><span class="o">.</span><span class="n">/customers.xml</span><span class="w">
</span></code></pre></div></div>

<p>and the output looks like this:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;Objs</span> <span class="na">Version=</span><span class="s">"1.1.0.1"</span> <span class="na">xmlns=</span><span class="s">"http://schemas.microsoft.com/powershell/2004/04"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;Obj</span> <span class="na">RefId=</span><span class="s">"0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;TN</span> <span class="na">RefId=</span><span class="s">"0"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;T&gt;</span>System.Object[]<span class="nt">&lt;/T&gt;</span>
      <span class="nt">&lt;T&gt;</span>System.Array<span class="nt">&lt;/T&gt;</span>
      <span class="nt">&lt;T&gt;</span>System.Object<span class="nt">&lt;/T&gt;</span>
    <span class="nt">&lt;/TN&gt;</span>
    <span class="nt">&lt;LST&gt;</span>
      <span class="nt">&lt;Obj</span> <span class="na">RefId=</span><span class="s">"1"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;TN</span> <span class="na">RefId=</span><span class="s">"1"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;T&gt;</span>System.Management.Automation.PSCustomObject<span class="nt">&lt;/T&gt;</span>
          <span class="nt">&lt;T&gt;</span>System.Object<span class="nt">&lt;/T&gt;</span>
        <span class="nt">&lt;/TN&gt;</span>
        <span class="nt">&lt;MS&gt;</span>
          <span class="nt">&lt;S</span> <span class="na">N=</span><span class="s">"Id"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/S&gt;</span>
          <span class="nt">&lt;S</span> <span class="na">N=</span><span class="s">"FirstName"</span><span class="nt">&gt;</span>James<span class="nt">&lt;/S&gt;</span>
          <span class="nt">&lt;S</span> <span class="na">N=</span><span class="s">"LastName"</span><span class="nt">&gt;</span>Monroe<span class="nt">&lt;/S&gt;</span>
          <span class="nt">&lt;S</span> <span class="na">N=</span><span class="s">"Country"</span><span class="nt">&gt;</span>USA<span class="nt">&lt;/S&gt;</span>
          <span class="nt">&lt;S</span> <span class="na">N=</span><span class="s">"Status"</span><span class="nt">&gt;</span>Active<span class="nt">&lt;/S&gt;</span>
        <span class="nt">&lt;/MS&gt;</span>
      <span class="nt">&lt;/Obj&gt;</span>
      <span class="nt">&lt;Obj</span> <span class="na">RefId=</span><span class="s">"2"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;TNRef</span> <span class="na">RefId=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;MS&gt;</span>
          <span class="nt">&lt;S</span> <span class="na">N=</span><span class="s">"Id"</span><span class="nt">&gt;</span>2<span class="nt">&lt;/S&gt;</span>
          <span class="nt">&lt;S</span> <span class="na">N=</span><span class="s">"FirstName"</span><span class="nt">&gt;</span>Diane<span class="nt">&lt;/S&gt;</span>
          <span class="nt">&lt;S</span> <span class="na">N=</span><span class="s">"LastName"</span><span class="nt">&gt;</span>Wheatley<span class="nt">&lt;/S&gt;</span>
          <span class="nt">&lt;S</span> <span class="na">N=</span><span class="s">"Country"</span><span class="nt">&gt;</span>UK<span class="nt">&lt;/S&gt;</span>
          <span class="nt">&lt;S</span> <span class="na">N=</span><span class="s">"Status"</span><span class="nt">&gt;</span>Active<span class="nt">&lt;/S&gt;</span>
        <span class="nt">&lt;/MS&gt;</span>
      <span class="nt">&lt;/Obj&gt;</span>
      <span class="nt">&lt;Obj</span> <span class="na">RefId=</span><span class="s">"3"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;TNRef</span> <span class="na">RefId=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;MS&gt;</span>
          <span class="nt">&lt;S</span> <span class="na">N=</span><span class="s">"Id"</span><span class="nt">&gt;</span>3<span class="nt">&lt;/S&gt;</span>
          <span class="nt">&lt;S</span> <span class="na">N=</span><span class="s">"FirstName"</span><span class="nt">&gt;</span>Sara<span class="nt">&lt;/S&gt;</span>
          <span class="nt">&lt;S</span> <span class="na">N=</span><span class="s">"LastName"</span><span class="nt">&gt;</span>Bailey<span class="nt">&lt;/S&gt;</span>
          <span class="nt">&lt;S</span> <span class="na">N=</span><span class="s">"Country"</span><span class="nt">&gt;</span>UK<span class="nt">&lt;/S&gt;</span>
          <span class="nt">&lt;S</span> <span class="na">N=</span><span class="s">"Status"</span><span class="nt">&gt;</span>Suspended<span class="nt">&lt;/S&gt;</span>
        <span class="nt">&lt;/MS&gt;</span>
      <span class="nt">&lt;/Obj&gt;</span>
    <span class="nt">&lt;/LST&gt;</span>
  <span class="nt">&lt;/Obj&gt;</span>
<span class="nt">&lt;/Objs&gt;</span>
</code></pre></div></div>

<p>A bit noisy but the data is there.</p>

<h2 id="conclusion">Conclusion</h2>
<p>Using the PowerShell’s build-in cmdlets we can easily convert between common data types such as CSV, JSON and XML. For a full list of supported cmdlets please check the link in the resources section.</p>

<h2 id="resources">Resources</h2>
<ul>
  <li><a href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/?view=powershell-7.2" target="_blank" rel="noopener noreferrer">cmdlets in Microsoft.PowerShell.Utility</a></li>
</ul>

      
  </div>
<!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    

    
    
      <li><strong class="current-page">1</strong></li>
    

    
    

    
    
    

    

    
    

    
      <li><a href="https://devpower.co.uk/page2/">2</a></li>
    

    
    
      <li><a href="https://devpower.co.uk/page2/" class="btn">Next</a></li>
    
  </ul>
</div>


</div><!-- /#main -->

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">window.jQuery || document.write('<script type="text/javascript" src="https://devpower.co.uk/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script type="text/javascript" src="https://devpower.co.uk/assets/js/scripts.min.js"></script>
<script type="text/javascript" async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>
<script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>



<!-- Asynchronous Google Analytics snippet -->
<!--script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'G-V0VB7KHEQV', 'auto');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script-->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-V0VB7KHEQV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-V0VB7KHEQV');
</script>








<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>© 2021 DevPower.co.uk </span>

  </footer>
</div><!-- /.footer-wrapper -->

</body>
</html>
